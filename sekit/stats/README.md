# Stats
Searchで得たCSVに統計処理を行うツールです。
同じパラメータの組み合わせで実行された実験結果のサンプルから平均値・標準偏差の値等を算出してCSV形式で出力します。

## 動かしかた
1. 本リポジトリの`examples`内にある`search_inputs`フォルダとその中身を任意の場所に保存する。

2. `search_inputs`フォルダのある場所に移動する。

3. 以下のコマンドを実行する。
```
python -m sekit.search search_inputs/*.json | python -m sekit.stats > stats_output.csv
```
3. `stats_output.csv`に実行結果が保存されているので確認します。
```
$ cat stats_output.csv 
,_header,activation,hidden_layer_sizes,validation_fraction,_n,|,hoge(ave),hoge(std),hoge(min),hoge(max),piyo(ave),piyo(std),piyo(min),piyo(max),_process_time(ave),_process_time(std),_process_time(min),_process_time(max)
0,sample,relu,"[100, 200]",0.1,2,|,600.2647803582282,0.1703358898918168,600.0944444683364,600.43511624812,1.073608024195559,0.13328903138222575,0.9403189928133332,1.2068970555777847,2.4437904357910156e-05,1.072883605957033e-06,2.3365020751953125e-05,2.551078796386719e-05
1,sample,relu,[300],0.1,2,|,600.4803527984529,0.2625564894084391,600.2177963090445,600.7429092878614,0.40796595698522253,0.009683905626784312,0.3982820513584382,0.4176498626120068,2.2411346435546875e-05,4.76837158203125e-07,2.193450927734375e-05,2.288818359375e-05
2,sample,relu,"[500, 500, 500]",0.4,2,|,3001.320417115878,0.08105476058562999,3001.2393623552925,3001.401471876464,1.4021034822826084,0.1724001405042891,1.2297033417783192,1.5745036227868974,2.372264862060547e-05,2.264976501464842e-06,2.1457672119140625e-05,2.598762512207031e-05
3,sample,relu,"[500, 500, 500]",0.5,2,|,3001.1218031824556,0.0960254076678666,3001.0257777747875,3001.217828590123,2.294248881238327,0.015225228219436726,2.27902365301889,2.3094741094577635,2.3126602172851566e-05,1.9073486328125e-06,2.1219253540039066e-05,2.5033950805664066e-05
4,sample,tanh,"[100, 200]",0.1,2,|,601.2092340175873,0.2137589960853461,600.995475021502,601.4229930136727,0.7519089267784571,0.18737940642091916,0.5645295203575379,0.9392883331993762,2.777576446533203e-05,2.0265579223632812e-06,2.574920654296875e-05,2.9802322387695312e-05
5,sample,tanh,[300],0.1,2,|,600.3930945084046,0.01942998114054717,600.373664527264,600.4125244895451,0.7077854814666705,0.39803434061055987,0.30975114085611066,1.1058198220772304,2.3484230041503906e-05,1.7881393432617188e-06,2.1696090698242188e-05,2.5272369384765625e-05
```

Searchで集計した実験結果の統計値をとっています。
例えば、`hoge(ave)`, `hoge(std)`, `hoge(min)`, `hoge(max)`は、順にhoge値の平均、標準偏差、最小値、最大値を表しています。
`_n`列は、サンプリング数を表しています。

## オプション
- `-i` or `--input`: 入力となるCSVファイルのパス. 省略した場合は標準入力からうけとる
- `-o` or `--output`: 標準出力せずにファイルを保存する際のファイル名
- `--separator`: 実験パラメータと実験結果を区切る列に入れる文字列. デフォルトは `|`
- `--funcs`: 計算する統計値。以下の中から複数選択する。デフォルトは`ave std min max`
  - `ave`: 平均
  - `std`: 標準偏差
  - `min`: 最小値
  - `max`: 最大値
- `ignore`: 実験パラメータとみなさない列を指定する。デフォルトは`_seed, _filename`
- `count_key`: パラメータの組み合わせ毎のサンプリング数を保存するカラム名を指定する。デフォルトは`_n`
- `n_samples`: サンプリング数の最大値を設定する. デフォルトではすべてのサンプルから統計値を得る。
